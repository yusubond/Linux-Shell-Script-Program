## Shell脚本编程
### Shell数组
在Shell中使用括号()表示数组，各数组元素使用空格分割开。Bash Shell支持一维数组，不支持多维数组，并且没有限定数组的大小,初始化时不需要定义数组大小。另外，Shell数组中可以包含不同的数据类型，即可以同时包含单个字符，字符串，甚至整数。

数组下标由0开始编写，下标可以是整数或者算数表达式，获取单个数组元素利用下标，获取数组的所有元素使用@或*符号。
#### 声明数组
使用declare命令可以创建数组，配合-a/r的选项可以创建不同权限的数组，如下所示：
```
# 创建一般数组
declare -a array_name
# 创建只读数组
declare -ar array_name
```
#### 定义数组
使用declare内置命令声明数组，但不使用declare命令也能定义数组。定义数组的一般格式为：
```
array_name=(val0 val1 val2 ...)
```
当然可以单独定义数组的各个分量，如下所示：
```
array_name[0]=val0
array_name[1]=val1
array_name[2]=val2
```
#### 读取数组元素
读取数组的一般格式为：
```
${array_name[num]}
${array_name[@]}
```
#### 读取数组长度
```
# 读取数组元素的个数
echo ${#array_name[@]}
# 读取单个数组元素的长度
echo ${#array_name[num]}
```
### 实例程序
```
#!/bin/bash
my_array=(A B D a b c 1 2 3 "hello array")
echo "${my_array[@]}"
echo "${my_array[9]}"
```
### Shell基本运算符

Shell和其他编程语言一样，支持多种运算符，包括：
- 算数运算符
- 关系运算符
- 布尔运算符
- 字符串运算符
- 文件测试运算符

Shell不支持简单的数学运算，需要使用其他命令来实现，比如awk和expr，其中expr最常用。expr是一款表达式计算工具，可以完成表达式的求值操作。用法很简单，如下所示：
```
#!/bin/bash
value=`expr 1 + 2`
echo "#{value}"
echo "`expr 1 + 2`"
```
值得注意的是：
1. 乘号*前必须加反斜杠\才能实现乘法运算；
2. 表达式和运算符之间必须要有空格；
3. 完整的表达式必须包含在` `` `符号间；
4. 条件表达式要放在方括号之间，并且要有空格；即[$a==$b]是错误的，[ $a == $b ]是正确的。

#### 算数运算符
下表为常用的算数运算符及其举例说明。

|运算符|说明|举例说明|
|:-----:|:----:|-----|
|+|加法|``` `expr 10 + 20` ```|
|-|减法|``` `expr 20 - 10` ```|
|*|乘法|``` `expr 10 \* 20` ```|
|/|除法|``` `expr 20 / 10` ```|
|%|取余|``` `expr 15 % 10` ```|
|=|赋值|``` `expr a=13` ```|
|==|相等判断|[$a == $b],相等返回true,不等返回false|
|!=|不等判断|[$a != $b],相等返回true,不等返回false|

#### 关系运算符
关系运算符只支持数字，不支持字符串，除非字符串的值是数字。下表为常用的算数运算符及其举例说明。

|运算符|说明|举例说明|
|:-----:|:----|-----|
|-eq|相等判断;相等返回 true|[ $a -eq $b ]|
|-ne|不等判断;不等返回 true|[ $a -ne $b ]|
|-gt|大于判断;左边的数大于右边的数,则返回true,否则返回false|[ $a -gt $b ]|
|-lt|小于判断;左边的数小于右边的数,则返回true,否则返回false|[ $a -lt $b ]|
|-ge|大于等于判断;左边的数大于等于右边的数,则返回true,否则返回false|[ $a -ge $b ]|
|-le|小于等于判断;左边的数小于等于右边的数,则返回true,否则返回false|[ $a -le $b ]|

#### 布尔运算符
布尔运算符一般就是或与非，下表为常用的布尔运算符及其举例说明。假定a=15,b=20。

|运算符|说明|举例说明|
|:-----:|:----|-----|
|!|非运算,表达式为true,则返回false,否则返回true|[!false],返回true|
|-o|有一个表达式为true,则返回true,否则返回false|[ $a -gt 10 -o $b -lt 15 ],返回true|
|-a|两个表达式都为true,则返回true,否则返回false|[ $a -gt 10 -a $b -lt 25 ],返回true|

#### 逻辑运算符
Shell的逻辑运算符就是逻辑的AND(&&)和逻辑的OR(||)，下表是其举例说明，假定a=15,b=20。

|运算符|说明|举例说明|
|:-----:|:----|-----|
|&&|逻辑的AND|[[ $a -gt 10 && $b -lt 25 ]],返回true|
|[]|逻辑的OR|[[ $a -gt 10 [] $b -lt 10 ]],返回true|

#### 字符串运算符
下表为常用的字符串运算符及其举例说明，假定a="abc",b="bcdf"。

|运算符|说明|举例说明|
|:-----:|:----|-----|
|=|检测两个字符串是否相等，相等则返回true|[ $a = $b ],返回false|
|!=|检测两个字符串是否相等，不相等则返回true|[ $a != $b ],返回true|
|-z|检测字符串的长度是否为0,为0返回true|[ -z $a ],返回false|
|-n|检测字符串的长度是否为0,不为0返回true|[ -n $a ],返回true|
|str|检测字符串是否为空，不为空返回true|[ $a ],返回true|

#### 文件测试运算符
文件测试运算符主要用于检测Linux文件的各种属性。下表为文件检测运算符的说明。

|运算符|说明|举例说明|
|:-----:|:----|-----|
|-b|检测文件是否是块设备文件,是则返回true|[-b $file ]|
|-c|检测文件是否是字符设备文件,是则返回true|[-c $file ]|
|-d|检测文件是否是目录,是则返回true|[-d $file ]|
|-f|检测文件是否是普通文件（既不是目录，也不是设备文件）,是则返回true|[-f $file ]|
|-g|检测文件是否设置了SGID位,是则返回true|[-g $file ]|
|-k|检测文件是否设置了粘着位(Sticky Bit),是则返回true|[-k $file ]|
|-p|检测文件是否是具名管道,是则返回true|[-p $file ]|
|-u|检测文件是否设置了SUID位,是则返回true|[-u $file ]|
|-r|检测文件是否可读,是则返回true|[-r $file ]|
|-w|检测文件是否可写,是则返回true|[-w $file ]|
|-x|检测文件是否可执行,是则返回true|[-x $file ]|
|-s|检测文件是否为空（文件大小是否大于0）,是则返回true|[-s $file ]|
|-e|检测文件（包括目录）是否存在,是则返回true|[-e $file ]|
