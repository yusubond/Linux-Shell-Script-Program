## Shell脚本编程

### Shell函数

Shell也可以定义函数，并在脚本中随便调用。使用函数可以使脚本代码模块化，易于使用；避免重复性代码，便于管理；可以实现特定的功能，可以看做某个过程或者方法，甚至子程序。

Shell中函数的定义格式如下：

```
＃bash-only语法
function name (){
  commands;
}
```
或者
```
name (){
  commands;
}
```
值得注意的是：

- 可以用function fun()定义，也可以直接fun()定义。但是，所有函数都必须在使用前定义。
- 若是写成一行函数的形式，函数主体{}内的命令以;结尾。
- 参数返回可加可不加。若不加则以最后一条命令运行结果作为返回值。
- 调用函数时可以向其传递参数，在函数内部使用$n的形式来获取参数，$1表示第一个参数，以此类推。_当n大于等于10时，需要使用${n}来获取参数。_

#### 1.hello()函数

```
#!/bin/bash
hello(){
  echo "Hello world!";
}
```
或者
```
#!/bin/bash
hello(){echo "Hello world";}
```

#### 2.显示函数

命令`declare -f`
可以列出之前这个脚本之前定义的所有函数及其源码。
命令`declare -f functionName`
可以显示functionName函数源码。

#### 3.移除函数

移除函数可以使用如下命令：

```
unset -f functionName
```



下面几个特殊字符可以用来处理函数：

|特殊符号参数|说明|
|:----:|:-----|
|$#|传递到脚本的参数个数|
|#*|以一个单字符串显示所有向脚本传递的参数|
|#$|脚本运行的当前进程ID号|
|#!|后台运行的最后一个进程的ID号|
|$@|与$*相同，但是使用时加引号，并在引号中返回每个参数。|
|$-|显示Shell使用的当前选项，与set命令功能相同。|
|$?|显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。|
